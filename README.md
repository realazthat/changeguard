<!--

WARNING: This file is auto-generated by snipinator. Do not edit directly.
SOURCE: `README.md.jinja2`.

-->
<!--






-->

# ChangeGuard

<div align="center">

<!-- Icons from https://lucide.dev/icons/users -->
<!-- Icons from https://lucide.dev/icons/laptop-minimal -->

![**Audience:** Developers][1] ![**Platform:** Linux][2]

</div>

<div align="center">

![Top language][3] ![GitHub License][4] [![PyPI - Version][5]][6]
[![Python Version][7]][6]

</div>

---

<div align="center">

|         | Status                     | Stable                    | Unstable                  |                    |
| ------- | -------------------------- | ------------------------- | ------------------------- | ------------------ |
| Master  | [![Build and Test][8]][9]  | [![since tagged][10]][11] |                           | ![last commit][12] |
| Develop | [![Build and Test][13]][9] | [![since tagged][14]][15] | [![since tagged][16]][17] | ![last commit][18] |

CLI to check if your repository/directory files have changed over the span of a
script.

</div>

## What

Like hashdeep, but customized to check if any of the original files in a
repository/directory change over the course of a precommit script.

## Features

- Can use any sha256sum-like command (uses xxhash by default).
- Use `.changeguard-ignore` to ignore files that should not be checked for
  changes.

## Install

```bash
# Install from pypi (https://pypi.org/project/changeguard/)
pip install changeguard

# Install from git (https://github.com/realazthat/changeguard)
pip install git+https://github.com/realazthat/changeguard.git@v0.3.1
```

## ðŸ’» Command Line Options

<!---->
<img src="README.help.generated.svg" alt="Output of `python -m changeguard.cli --help`" />
<!---->

## Requirements

- Python 3.8+
  - Why: Some dev dependencies require Python 3.8+.

### Tested on

- WSL2 Ubuntu 20.04, Python `3.8.0`.
- Ubuntu 20.04, Python `3.8.0, 3.9.0, 3.10.0, 3.11.0, 3.12.0`, tested in GitHub Actions
  workflow ([build-and-test.yml](./.github/workflows/build-and-test.yml)).

## Contributions

### Development environment: Linux-like

- For running `pre.sh` (Linux-like environment).

  - From [./.github/dependencies.yml](./.github/dependencies.yml), which is used for
    the GH Action to do a fresh install of everything:

    ```yaml
    bash: scripts.
    findutils: scripts.
    grep: tests.
    xxd: tests.
    git: scripts, tests.
    xxhash: scripts (changeguard).
    rsync: out-of-directory test.
    expect: for `unbuffer`, useful to grab and compare ansi color symbols.
    jq: dependency for [yq](https://github.com/kislyuk/yq), which is used to generate
      the README; the README generator needs to use `tomlq` (which is a part of `yq`)
      to query `pyproject.toml`.
    
    ```

  - Requires `pyenv`, or an exact matching version of python as in
    [`.python-version`](./.python-version).
  - `nvm` for prettier (markdown formatting).
  - `act` (to run the GH Action locally):
    - Requires `nodejs`.
    - Requires `Go`.
    - `docker`.
  - Generate animation:
    - `docker`.

### Commit Process

1. (Optionally) Fork the `develop` branch.
2. Stage your files: `git add path/to/file.py`.
3. `bash scripts/pre.sh`, this will format, lint, and test the code.
4. `git status` check if anything changed (generated `README.md` for
   example), if so, `git add` the changes, and go back to the previous step.
5. `git commit -m "..."`.
6. Make a PR to `develop` (or push to develop if you have the rights).

## Release Process

These instructions are for maintainers of the project.

1. In the `develop` branch, run `bash scripts/pre.sh` to ensure
   everything is in order.
2. In the `develop` branch, bump the version in `pyproject.toml`,
   following semantic versioning principles. Also modify the
   `last_unstable_release` and `last_stable_release` in the
   `[tool.changeguard-project-metadata]` table as appropriate.
3. In the `develop` branch, commit these changes with a message like "Prepare
   release X.Y.Z". (See the contributions section [above](#commit-process)).
4. Merge the `develop` branch into the `master` branch:
   `git checkout master && git merge develop --no-ff`.
5. `master` branch: Tag the release: Create a git tag for the release with
   `git tag -a vX.Y.Z -m "Version X.Y.Z"`.
6. Publish to PyPI: Publish the release to PyPI with
   `bash scripts/deploy-to-pypi.sh`.
7. Push to GitHub: Push the commit and tags to GitHub with
   `git push && git push --tags`.
8. The `--no-ff` option adds a commit to the master branch for the merge, so
   refork the develop branch from the master branch:
   `git checkout develop && git merge master`.
9. Push the develop branch to GitHub: `git push origin develop`.

[1]:
  https://img.shields.io/badge/Audience-Developers-0A1E1E?style=plastic&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXVzZXJzIj48cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIvPjxjaXJjbGUgY3g9IjkiIGN5PSI3IiByPSI0Ii8+PHBhdGggZD0iTTIyIDIxdi0yYTQgNCAwIDAgMC0zLTMuODciLz48cGF0aCBkPSJNMTYgMy4xM2E0IDQgMCAwIDEgMCA3Ljc1Ii8+PC9zdmc+
[2]:
  https://img.shields.io/badge/Platform-Linux-0A1E1E?style=plastic&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWxhcHRvcC1taW5pbWFsIj48cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTIiIHg9IjMiIHk9IjQiIHJ4PSIyIiByeT0iMiIvPjxsaW5lIHgxPSIyIiB4Mj0iMjIiIHkxPSIyMCIgeTI9IjIwIi8+PC9zdmc+
[3]:
  https://img.shields.io/github/languages/top/realazthat/changeguard.svg?cacheSeconds=28800&style=plastic&color=0A1E1E
[4]:
  https://img.shields.io/github/license/realazthat/changeguard?style=plastic&color=0A1E1E
[5]:
  https://img.shields.io/pypi/v/changeguard?style=plastic&color=0A1E1E
[6]: https://pypi.org/project/changeguard/
[7]:
  https://img.shields.io/pypi/pyversions/changeguard?style=plastic&color=0A1E1E
[8]:
  https://github.com/realazthat/changeguard/actions/workflows/build-and-test.yml/badge.svg?branch=master&style=plastic
[9]:
  https://github.com/realazthat/changeguard/actions/workflows/build-and-test.yml?style=plastic
[10]:
  https://img.shields.io/github/commits-since/realazthat/changeguard/v0.3.1/master?style=plastic
[11]:
  https://github.com/realazthat/changeguard/compare/v0.3.1...master
[12]:
  https://img.shields.io/github/last-commit/realazthat/changeguard/master?style=plastic
[13]:
  https://github.com/realazthat/changeguard/actions/workflows/build-and-test.yml/badge.svg?branch=develop&style=plastic
[14]:
  https://img.shields.io/github/commits-since/realazthat/changeguard/v0.3.1/develop?style=plastic
[15]:
  https://github.com/realazthat/changeguard/compare/v0.3.1...develop
[16]:
  https://img.shields.io/github/commits-since/realazthat/changeguard/v0.3.1/develop?style=plastic
[17]:
  https://github.com/realazthat/changeguard/compare/v0.3.1...develop
[18]:
  https://img.shields.io/github/last-commit/realazthat/changeguard/develop?style=plastic
